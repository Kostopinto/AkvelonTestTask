{"version":3,"sources":["main.js"],"names":["deleteData","id","fetch","method","then","loadData","document","formInvoice","reset","response","json","myTable","getElementById","head","list","map","item","date_created","number","date_supplied","comment","innerHTML","join","pushData","body","value","options","headers","Content-Type","JSON","stringify","window","onload","onclick","_ref","target","style","display","className","isDelete","confirm","getAttribute","textarea","bs","onkeyup","length","disabled"],"mappings":"AAAA,YA2BA,SAASA,YAAWC,GAChBC,MAAAA,kCAAwCD,GAAOE,OAAQ,WAClDC,KAAK,WAAA,MAAMC,cAGpB,QAASA,YACLC,SAASC,YAAYC,QACrBN,MAAM,kCACDE,KAAK,SAACK,GAAD,MAAcA,GAASC,SAC5BN,KAAK,SAACK,GACH,GAAME,GAAUL,SAASM,eAAe,WAClCC,EAAAA,0MAOAC,EAAOL,EAASM,IAAI,SAAAC,GACtB,MAAA,iCACUA,EAAKC,aADf,kCAEUD,EAAKE,OAFf,kCAGUF,EAAKG,cAHf,kCAIUH,EAAKI,QAJf,wEAKgDJ,EAAKf,GALrD,4CAQJU,GAAQU,UAAYR,EAAOC,EAAKQ,KAAK,MAIjD,QAASC,YACL,GAAMC,IACFP,aAAcX,SAASC,YAAYU,aAAaQ,MAChDP,OAAQZ,SAASC,YAAYW,OAAOO,MACpCN,cAAeb,SAASC,YAAYY,cAAcM,MAClDL,QAASd,SAASC,YAAYa,QAAQK,OAIpCC,GACFvB,OAAQ,OACRwB,SACIC,eAAgB,oBAEpBJ,KAAMK,KAAKC,UAAUN,GAGzBtB,OAAM,iCAAkCwB,GACnCtB,KAAK,WAAA,MAAMC,cA5EpB0B,OAAOC,OAAS,WACZ3B,YAIJ0B,OAAOE,QAAU,SAAAC,GAEX,GADFC,GACED,EADFC,MAaA,IAViB,aAAbA,EAAOlC,KACPK,SAASM,eAAe,iBAAiBwB,MAAMC,QAAU,UACzD/B,SAASM,eAAe,YAAYwB,MAAMC,QAAU,QAEvC,cAAbF,EAAOlC,KACPK,SAASM,eAAe,iBAAiBwB,MAAMC,QAAU,OACzD/B,SAASM,eAAe,YAAYwB,MAAMC,QAAU,UAEpDd,YAEoB,OAApBY,EAAOG,UAAoB,CAC3B,GAAMC,GAAWC,QAAQ,gBACrBD,IACAvC,WAAWmC,EAAOM,aAAa,eA0D3C,IAAMC,UAAWpC,SAASM,eAAe,UACnC+B,GAAKrC,SAASM,eAAe,aACnC8B,UAASE,QAAU,WACXF,SAASjB,MAAMoB,OAAS,EACxBF,GAAGG,UAAW,EAEdH,GAAGG,UAAW","file":"main.js","sourcesContent":["window.onload = () => {\r\n    loadData();\r\n};\r\n\r\n\r\nwindow.onclick = ({\r\n    target\r\n}) => {\r\n\r\n    if (target.id == 'addButton') {\r\n        document.getElementById('CreateInvoice').style.display = 'inherit';\r\n        document.getElementById('Invoices').style.display = 'none';\r\n    }\r\n    if (target.id == 'buttonSave') {\r\n        document.getElementById('CreateInvoice').style.display = 'none';\r\n        document.getElementById('Invoices').style.display = 'inherit';\r\n\r\n        pushData();\r\n    }\r\n    if (target.className == 'del') {\r\n        const isDelete = confirm('Are you sure?');\r\n        if (isDelete) {\r\n            deleteData(target.getAttribute('invoiceId'));\r\n        }\r\n    }\r\n};\r\n\r\nfunction deleteData(id) {\r\n    fetch(`http://localhost:3000/invoices/${id}`, {method: 'delete'})\r\n        .then(() => loadData());\r\n}\r\n\r\nfunction loadData() {\r\n    document.formInvoice.reset();\r\n    fetch('http://localhost:3000/invoices')\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n            const myTable = document.getElementById(\"myTable\");\r\n            const head = `<tr>\r\n                    <th>Create</th>\r\n                    <th>No</th>\r\n                    <th>Supply</th>\r\n                    <th>Comment</th>\r\n                    <th></th>\r\n            </tr>`;\r\n            const list = response.map(item => {\r\n                return `<tr>\r\n                    <td>${item.date_created}</td>\r\n                    <td>${item.number}</td>\r\n                    <td>${item.date_supplied}</td>\r\n                    <td>${item.comment}</td>\r\n                    <td><button class=\"del button\" invoiceId=\"${item.id}\">X</button></td>\r\n                </tr>`;\r\n            });\r\n            myTable.innerHTML = head + list.join('');\r\n        });\r\n}\r\n\r\nfunction pushData() {\r\n    const body = {\r\n        date_created: document.formInvoice.date_created.value,\r\n        number: document.formInvoice.number.value,\r\n        date_supplied: document.formInvoice.date_supplied.value,\r\n        comment: document.formInvoice.comment.value\r\n    };\r\n\r\n\r\n    const options = {\r\n        method: 'post',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(body)\r\n    };\r\n\r\n    fetch('http://localhost:3000/invoices', options)\r\n        .then(() => loadData());\r\n}\r\n\r\n\r\nconst textarea = document.getElementById('number');\r\nconst bs = document.getElementById('buttonSave');\r\ntextarea.onkeyup = () => {\r\n    if (textarea.value.length < 3) {\r\n        bs.disabled = true;\r\n    } else {\r\n        bs.disabled = false;\r\n    }\r\n};\r\n"]}